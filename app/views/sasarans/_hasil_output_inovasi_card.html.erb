<div class="card border-2 shadow mb-3">
  <div class="card-header">
    <div class="row align-items-center">
      <div class="row align-items-center">
        <div class="col">
          <h4 class="card-title">
            Inovasi Sasaran
            <span class="ms-2"><%= sesuai?(sasaran.output_inovasi_terisi?) %></span>
          </h4>
        </div>
      </div>
    </div>
  </div>
  <% unless diajukan? || sasaran.output_inovasi_terisi? %>
    <div class="card-body" id="inovasi-sasaran">
      <%= form_with(model: sasaran,url: inovasi_sasaran_path,
                    local: false,
                    id: 'form-inovasi',
                    data: {
                      controller: 'form-ajax',
                      form_ajax_target_param: 'sasaran-inovasi',
                      action: 'ajax:complete->form-ajax#processAjax'
                    }
      ) do |f| %>
        <div class="field">
          <%= f.label :hasil_inovasi, class: "form-label" %>
          <%= f.select(:hasil_inovasi,
                       ['Bukan Inovasi', 'Inovasi'],
                       {selected: f.object.hasil_inovasi_sasaran},
                       {
                         id: 'pilihan-inovasi',
                         data: {
                           controller: 'dropdown',
                           dropdown_parent_value: '#inovasi-sasaran',
                           dropdown_jenis_value: 'chain',
                           dropdown_event_name_value: 'toggle-inovasi-fields',
                         } } )%>
        </div>
        <div class="field d-none" id="nama_inovasi" data-controller="field" data-action="toggle-inovasi-fields@document->field#toggle_visible">
          <%= f.label :inovasi_sasaran,'Inovasi', class: "form-label" %>
          <%= f.text_area :inovasi_sasaran, {class: "form-control", placeholder: 'tuliskan inovasi...', value: f.object.inovasi_sasaran} %>
        </div>
        <div class="actions">
          <%= f.submit %>
        </div>
      <% end %>
    </div>
  <% end %>
  <div class="card-body">
    <div class="table-responsive" id="sasaran-inovasi">
      <% if sasaran.output_inovasi_terisi? %>
        <%= render 'sasarans/hasil_inovasi', sasaran: sasaran %>
      <% end %>
    </div>
  </div>
  <hr>
</div>
