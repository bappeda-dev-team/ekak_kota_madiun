<div id="form-dampak">
  <%= form_with model: sasaran,
                url: update_dampak_sasaran_path(sasaran, nomor_sasaran: nomor),
                local: false,
                method: :patch,
                data: {
                  controller: 'form-ajax',
                  form_ajax_target_param: dom_id(sasaran),
                  action: 'ajax:complete->form-ajax#processAjax'
                } do |form| %>
    <div class="field">
      <%= form.label :sasaran_kinerja, { class: "form-label" } %>
      <%= form.text_area :sasaran_kinerja, {class: "form-control", readonly: true} %>
    </div>
    <div class="field">
      <%= label_tag 'penyebab_permasalahan', 'Penyebab permasalahan', class: 'form-label'  %>
      <%= text_area_tag 'penyebab_permasalahan', sasaran.penyebab_permasalahan, class: 'form-control', disabled: true %>
    </div>
    <div class="field">
      <%= form.label :permasalahan, { class: "form-label" } %>
      <%= form.text_area :permasalahan_sasaran, {class: "form-control", readonly: true, disabled: true} %>
    </div>
    <%= form.fields_for :rincian do |rincian_fields| %>
      <div class="field">
        <%= rincian_fields.label :resiko, "Risiko", { class: "form-label" } %>
        <%= rincian_fields.text_area :resiko, { class: "form-control" } %>
      </div>
      <!-- TODO: CHANGE TO RADIO BUTTON -->
      <div class="field">
        <%= rincian_fields.label :skala_kemungkinan, { class: 'form-label' } %>
        <%= rincian_fields.select :kemungkinan_id, raw("<option value='#{rincian_fields.object.kemungkinan&.id}' selected='selected'>#{rincian_fields.object.kemungkinan&.deskripsi}</option>"), {include_blank: true},
         { class: 'form-control',
           data: { placeholder: 'Skala Kemungkinan',
             controller: 'dropdown',
             dropdown_jenis_value: 'ajax',
             dropdown_parent_value: '#form-dampak',
             dropdown_url_value: kemungkinans_path(:json)
         }} %>
      </div>
      <div class="field">
        <%= rincian_fields.label :dampak, { class: "form-label" } %>
        <%= rincian_fields.text_area :dampak, { class: "form-control" } %>
      </div>
      <!-- TODO: CHANGE TO RADIO BUTTON -->
      <div class="field">
        <%= rincian_fields.label :skala_dampak, { class: 'form-label' } %>
        <%= rincian_fields.select :skala_id, raw("<option value='#{rincian_fields.object.skala_dampak&.id}' selected='selected'>#{rincian_fields.object.skala_dampak&.deskripsi}</option>"), {include_blank: true},
         { class: 'form-control',
           data: { placeholder: 'pilih skala dampak',
             controller: 'dropdown',
             dropdown_jenis_value: 'ajax',
             dropdown_parent_value: '#form-dampak',
             dropdown_url_value: dampaks_path(:json)
         }} %>
      </div>
    <% end %>
    <div class="actions">
      <%= form.submit "Simpan" %>
    </div>
  <% end %>
</div>
