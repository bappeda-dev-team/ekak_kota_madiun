<%= content_for :html_title, "BPMN SPBE OPD" %>
<%= content_for :navigation do %>
  <li class="breadcrumb-item" aria-current="page">Perencaan OPD</li>
  <li class="breadcrumb-item" aria-current="page">SPBE</li>
  <li class="breadcrumb-item active" aria-current="page">BPMN SPBE</li>
<% end %>
<% content_for :view_utama do %>
  <%= render 'shared/card_layout_subtitle', title: "BPMN SPBE OPD",
             sub_title: @opd, sub_title_2: @tahun do %>
    <div class="cetak d-grid gap-3">
    </div>
    <div class="table-responsive">
      <table class="table align-items-center table-bordered counter">
        <thead class="thead-light">
          <tr>
            <th class="border text-center" scope="col">No</th>
            <th class="border text-center" scope="col">Pohon Kinerja Operational</th>
            <th class="border text-center" scope="col">Rekin</th>
            <th class="border text-center" scope="col">Nama Pemilik Rekin</th>
            <th class="border text-center" scope="col">Action</th>
          </tr>
        </thead>
        <% @pokin_operationals.each do |pokin, rekins| %>
          <tbody id="<%= dom_id(pokin) %>">
            <% rowspan = rekins.length + 1 %>
            <tr>
              <td class="" rowspan="<%= rowspan %>"></td>
              <td class="text-wrap" rowspan="<%= rowspan %>"><%= pokin %></td>
            </tr>
            <% rekins.each do |rekin| %>
              <tr class="renaksi-opd skip">
                <td class="text-wrap"><%= rekin %></td>
                <td class="text-wrap"><%= rekin.nama_nip_pemilik %></td>
                <td class="p-3">
                  <div class="d-grid gap-3">
                    <%= render ModalButtonComponent.new(path: tambah_bpmn_sasaran_path(rekin, tahun: @tahun, kode_opd: @kode_opd), title: 'Pilih BPMN') %>
                  </div>
                </td>
              </tr>
            <% end %>
          </tbody>
        <% end %>
      </table>
    </div>
  <% end %>
<% end %>
